#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include<memory.h>
#include<string.h>

void main() {

    int date[13][31];
    int items[102];



    FILE* fp;
    fp = fopen("data.txt", "w");
    srand((unsigned int)time(NULL));
    //user생성
    int buy_idx = 1;
    int year = 2022;
    while (year < 2024) {
        int user = 10000;

        while (user > 0) {
            memset(date, 0, sizeof(date));
            int count = rand() % 20 + 1;

            while (count > 0) {
                int mon = rand() % 12 + 1;
                int day = rand() % 30 + 1;

                if (date[mon][day] == 1) {
                    continue;
                }
                else if (mon == 2 && day >= 29) {
                    continue;
                }
                else if (mon == 4 || mon == 6 || mon == 9 || mon == 11) {
                    if (day >= 31) {
                        continue;
                    }
                }
                else {
                    date[mon][day] = 1;
                }




                fprintf(fp, "insert into buy (buy_idx,user_idx,date) values (%d,%d,'%d-%d-%d');\n", buy_idx, user,year, mon, day);


                int tmp = rand() % 10 + 1;
                while (tmp > 0) {
                    memset(items, 0, sizeof(items));

                    int item = rand() % 101 + 1;

                    if (items[item] == 1) {
                        continue;
                    }
                    else {
                        items[item] = 1;
                    }

                    int cnt = rand() % 3 + 1;
                    fprintf(fp, "insert into buy_product (buy_idx,detail_idx,cnt) values (%d,%d,%d);\n", buy_idx, item, cnt);
                    tmp--;
                }
                buy_idx++;
                count--;
            }
            user--;



        }
        year++;
    }


    fclose(fp);


}